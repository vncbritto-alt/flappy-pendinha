<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flappy Vinicius — Pendinha Games</title>
  <style>
    :root { font-family: Inter, system-ui, Arial, Helvetica, sans-serif; }
    html, body { height: 100%; margin: 0; background: #70c5ce; display: flex; align-items: center; justify-content: center; }
    .wrap { width: 100%; max-width: 420px; padding: 20px; box-sizing: border-box; }
    canvas { display: block; width: 100%; height: auto; background: #70c5ce; border-radius: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.15); }
    .ui { position: relative; margin-top: 12px; display: flex; justify-content: space-between; align-items: center; color: #073b3b; }
    .score { font-weight: 700; font-size: 18px; }
    .small { font-size: 13px; color: #053033; }
    .hint { font-size: 13px; color: #075a57; margin-top: 8px; }
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="game" width="320" height="480"></canvas>
    <div class="ui">
      <div class="score">Pontos: <span id="points">0</span></div>
      <div class="small">Melhor: <span id="best">0</span></div>
    </div>
    <div style="height:8px"></div>
    <div class="hint">Toque / clique / espaço para pular</div>
  </div>

  <script>
    (() => {
      const canvas = document.getElementById('game');
      const ctx = canvas.getContext('2d');

      function resizeCanvas() {
        const maxW = Math.min(window.innerWidth - 40, 420);
        canvas.style.width = maxW + 'px';
      }
      window.addEventListener('resize', resizeCanvas);
      resizeCanvas();

      const W = canvas.width, H = canvas.height;
      let bird = { x: 70, y: H/2, r: 14, vy: 0, rot: 0 };
      let gravity = 0.35, jump = -7.5;
      let pipes = [];
      let frame = 0;
      let speed = 2.2;
      let gap = 130;
      let running = false;
      let score = 0;
      let best = parseInt(localStorage.getItem('flappy_best') || '0', 10);

      const elScore = document.getElementById('points');
      const elBest = document.getElementById('best');
      elBest.textContent = best;

      function rand(min, max) { return Math.random() * (max - min) + min; }

      function spawnPipe() {
        const top = rand(40, H/2 - 20);
        const bottom = top + gap;
        pipes.push({ x: W + 10, top, bottom, passed: false });
      }

      function circleRect(cx, cy, r, rx, ry, rw, rh) {
        const closestX = Math.max(rx, Math.min(cx, rx + rw));
        const closestY = Math.max(ry, Math.min(cy, ry + rh));
        const dx = cx - closestX;
        const dy = cy - closestY;
        return (dx * dx + dy * dy) < r * r;
      }

      function reset() {
        bird.y = H / 2; bird.vy = 0; bird.rot = 0;
        pipes = []; frame = 0; score = 0; speed = 2.2;
        running = true;
        elScore.textContent = score;
      }

      function flap() {
        if (!running) { reset(); return; }
        bird.vy = jump;
      }
      canvas.addEventListener('click', flap);
      canvas.addEventListener('touchstart', (e) => { e.preventDefault
